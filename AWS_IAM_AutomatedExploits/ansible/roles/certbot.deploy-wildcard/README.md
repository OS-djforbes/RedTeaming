certbot.deploy-wildcard-certificate
=========

This role deploys the wildcard LetsEncrypt SSL certificates using certbot.

Requirements
------------

- Ubuntu.
- SystemD (on the remote system).
- An AWS S3 bucket, with read/write permissions to that bucket.
- The AWS CLI (installed via pip).

Role Variables
--------------

- `certbot_deploy_working_dir` Defaults to `./deploy-working-dir`. A staging directory locally used to download and unzip the certificates from S3.
- `certbot_s3_bucket`  Defaults to `{{ env }}-instance-store`. NO default. Must be defined.
- `certbot_s3_prefix` - Defaults to `certbot`. The S3 prefix to use for certificate storage.
- `nginx_service` The NGINX service to reload. For example, specifying `nginx-reverse-proxy` will reload the SystemD service `nginx-reverse-proxy`. If the variable is not defined, the

For each group/host in your Ansible inventory, you'll need another variable that defines the certificates that certbot will generate. For instance, your Ansible inventory `foo`, with host `bar` is running Kibana and Elasticsearch:

```

# inventory/foo/host_vars/bar/certbot.yml
certbot_action: create-renew
certbot_s3_bucket: YOURBUCKET
certbot_s3_prefix: certbot
certbot_route53_region: us-east-1
certbot_email: YOUREMAIL@EXAMPLE.ORG
nginx_service: nginx-reverse-proxy

# make it production
# certbot_production: yes
```

Dependencies
------------

None.

Example Playbook
----------------

```
- hosts: server_group
- roles:
    - role: certbot.deploy-wildcard-certificate
```

License
-------

BSD

Author Information
------------------

MISI - https://misi.tech

